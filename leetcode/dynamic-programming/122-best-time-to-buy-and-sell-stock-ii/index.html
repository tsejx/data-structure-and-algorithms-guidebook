<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link
      rel="stylesheet"
      href="/data-structure-and-algorithms-guidebook/umi.4074e770.css"
    />
    <script>
      window.routerBase = "/data-structure-and-algorithms-guidebook/";
    </script>
    <script>
      //! umi version: 3.5.14
    </script>
    <script>
      !(function () {
        var e = localStorage.getItem("dumi:prefers-color"),
          t = window.matchMedia("(prefers-color-scheme: dark)").matches,
          r = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === r[2] ? (t ? r[1] : r[0]) : r.includes(e) ? e : r[0]
        );
      })();
    </script>
    <title>122 - 买卖股票的最佳时机 II</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/leetcode/dynamic-programming/122-best-time-to-buy-and-sell-stock-ii" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/data-structure-and-algorithms-favicon.svg&#x27;)" href="/data-structure-and-algorithms-guidebook//">Data Structure and Algorithms Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span><a href="/data-structure-and-algorithms-guidebook//data-structure">数据结构</a></span><span><a href="/data-structure-and-algorithms-guidebook//algorithms">算法</a></span><span><a aria-current="page" class="active" href="/data-structure-and-algorithms-guidebook//leetcode">LeetCode</a></span><span><a href="/data-structure-and-algorithms-guidebook//front-end">前端编程</a></span><span><a href="/data-structure-and-algorithms-guidebook//extensions">扩展</a></span><span><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/data-structure-and-algorithms-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/data-structure-and-algorithms-favicon.svg&#x27;)" href="/data-structure-and-algorithms-guidebook//"></a><h1>Data Structure and Algorithms Guidebook</h1><p>数据结构与算法完全知识体系</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/data-structure-and-algorithms-guidebook//data-structure">数据结构</a></li><li><a href="/data-structure-and-algorithms-guidebook//algorithms">算法</a></li><li><a aria-current="page" class="active" href="/data-structure-and-algorithms-guidebook//leetcode">LeetCode</a></li><li><a href="/data-structure-and-algorithms-guidebook//front-end">前端编程</a></li><li><a href="/data-structure-and-algorithms-guidebook//extensions">扩展</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/data-structure-and-algorithms-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array">数组</a><ul><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/1-two-sum"><span>1 - 两数之和</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/15-three-sum"><span>15 - 三数之和</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/26-remove-duplicates-from-sorted-array"><span>26 - 删除排序数组中的重复项</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/27-remove-element"><span>27 - 移除元素</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/33-search-in-rotated-sorted-array"><span>33 - 搜索旋转排序数组</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/35-search-insert-position"><span>35 - 搜索插入位置</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/42-trapping-rain-water"><span>42 - 接雨水</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/56-merge-intervals"><span>56 - 合并区间</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/81-search-in-rotated-sorted-array-ii"><span>81 - 搜索旋转排序数组 II</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/88-merge-sorted-array"><span>88 - 合并两个有序数组</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/128-longest-consecutive-sequence"><span>128 - 最长连续序列</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/169-majority-element"><span>169 - 多数元素</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/179-largest-number"><span>179 - 最大数</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/217-contains-duplicate"><span>217 - 存在重复元素</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/219-contains-duplicate-ii"><span>219 - 存在重复元素 II</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/220-contains-duplicate-iii"><span>220 - 存在重复元素 III</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/268-missing-number"><span>268 - 缺失数字</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/283-move-zeroes"><span>283 - 移动零</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/287-find-the-duplicate-number"><span>287 - 寻找重复数</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/349-intersection-of-two-arrays"><span>349 - 两个数组的交集</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/384-shuffle-an-array"><span>384 - 打乱数组</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/407-trapping-rain-water-ii"><span>407 - 接雨水 II</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/509-fibonacci-number"><span>509 - 斐波那契数列</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/547-friend-circles"><span>547 - 朋友圈</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/674-longest-continuous-increasing-subsequence"><span>674 - 最长连续递增序列</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/695-max-area-of-island"><span>695 - 岛屿的最大面积</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/724-find-pivot-index"><span>724 - 寻找数组的中心索引</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/867-transpose-matrix"><span>867 - 转置矩阵</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/905-sort-array-by-parity"><span>905 - 按奇偶排序数组</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/1002-find-common-characters"><span>1002 - 查找常用字符串</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/1295-find-numbers-with-even-number-of-digits"><span>1295 - 统计位数为偶数的数字</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/interview-1-1-is-unique-lcci"><span>面试题 01.01 - 判断字符是否唯一</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/array/interview-1-2-check-permutation-lcci"><span>面试题 01.02 - 判定是否互为字符重排</span></a></li></ul></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string">字符串</a><ul><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/3-longest-substring-without-repeating-characters"><span>3 - 无重复字符的最长子串</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/5-longest-palindromic-substring"><span>5 - 最长回文子串</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/8-string-to-integer-atoi"><span>8 - 字符串转换整数</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/9-palindrome-number"><span>9 - 回文数</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/14-longest-common-prefix"><span>14 - 最长公共前缀</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/28-implement-strstr"><span>28 - 实现 strStr()</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/43-multiply-strings"><span>43 - 字符串相乘</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/58-length-of-last-word"><span>58 - 最后一个单词的长度</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/71-simplify-path"><span>71 - 简化路径</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/125-valid-palindrome"><span>125 - 验证回文串</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/151-reverse-words-in-a-string"><span>151 - 翻转字符串里的单词</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/165-compare-version-numbers"><span>165 - 比较版本号</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/211-design-add-and-search-words-data-structure"><span>211 - 添加与搜索单词 - 数据结构设计</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/242-valid-anagram"><span>242 - 有效的字母异位词</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/344-reverse-string"><span>344 - 反转字符串</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/387-first-unique-character-in-a-string"><span>387 - 字符串中的第一个唯一字符</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/415-add-strings"><span>415 - 字符串相加</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/434-number-of-segments-in-a-string"><span>415 - 字符串中的单词数</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/459-repeated-substring-pattern"><span>459 - 重复的子字符串</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/468-validate-ip-address"><span>468 - 验证 IP 地址</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/680-valid-palindrome-ii"><span>680 - 验证回文字符串 II</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/709-to-lower-case"><span>709 - 转换成小写字母</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/859-buddy-strings"><span>859 - 亲密字符串</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/917-reverse-only-letters"><span>917 - 仅仅反转字母</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/925-long-pressed-name"><span>925 - 长按键入</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/1108-defanging-an-ip-address"><span>1108 -  IP 地址无效化</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/1370-increasing-decreasing-string"><span>1370 - 上升下降字符串</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/1576-replace-all-s-to-avoid-consecutive-repeating-characters"><span>1576 -  替换所有的问号</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/1616-split-two-strings-to-make-palindrome"><span>1616 - 分割两个字符串得到回文串</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/5535-maximum-nesting-depth-of-the-parentheses"><span>5535 -  替换所有的问号</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/5543-largest-substring-between-two-equal-characters"><span>5543 -  两个相同字符之间的最长子字符串</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/offer-3-shu-zu-zhong-zhong-fu-de-shu-zi-lcof"><span>剑指 3 - 数组中重复的数字</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/offer-5-ti-huan-kong-ge-lcof"><span>剑指 5 - 替换空格</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/offer-38-zi-fu-chuan-de-pai-lie-lcof"><span>剑指 38 - 字符串的排列</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/offer-50-di-yi-ge-zhi-chu-xian-yi-ci-de-zi-fu-lcof"><span>剑指 50 - 第一只出现一次的字符</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/offer-58-1-fan-zhuan-dan-ci-shun-xu-lcof"><span>剑指 58 - 反转单词顺序</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/string/offer-58-2-zuo-xuan-zhuan-zi-fu-chuan-lcof"><span>剑指 58 - 左旋转字符串</span></a></li></ul></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list">链表</a><ul><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/2-add-two-numbers"><span>2 - 两数相加</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/11-container-with-most-water"><span>11 - 盛最多水的容器</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/19-remove-nth-node-from-end-of-list"><span>19 - 删除链表的倒数第 N 个节点</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/21-merge-two-sorted-lists"><span>21 - 合并两个有序链表</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/23-merge-k-sorted-lists"><span>23 - 合并 K 个升序链表</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/25-he-bing-liang-ge-pai-xu-de-lian-biao-lcof"><span>25 - 合并两个排序的链表</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/141-linked-list-cycle"><span>141 - 环形链表</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/142-linked-list-cycle-ii"><span>142 - 环形链表 II</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/160-intersection-of-two-linked-lists"><span>160 - 相交链表</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/206-reverse-linked-list"><span>206 - 反转链表</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/234-palindrome-linked-list"><span>234 - 回文链表</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/328-odd-even-linked-list"><span>328 - 奇偶链表</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/876-middle-of-the-linked-list"><span>876 - 链表的中间结点</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/912-sort-an-array"><span>912 - 排序数组</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/offer-6-cong-wei-dao-tou-da-yin-lian-biao-lcof"><span>剑指 6 - 从尾到头打印链表</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/offer-22-lian-biao-zhong-dao-shu-di-kge-jie-dian-lcof"><span>剑指 22 - 链表中倒数第 k 个节点</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/offer-24-fan-zhuan-lian-biao-lcof"><span>剑指 24 - 反转链表</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/linked-list/offer-25-he-bing-liang-ge-pai-xu-de-lian-biao-lcof"><span>剑指 25 - 合并两个排序的链表</span></a></li></ul></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/stack-and-queue">栈和队列</a><ul><li><a href="/data-structure-and-algorithms-guidebook//leetcode/stack-and-queue/20-valid-parentheses"><span>20 - 有效的括号</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/stack-and-queue/150-evaluate-reverse-polish-notation"><span>150 - 逆波兰表达式求值</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/stack-and-queue/155-min-stack"><span>155 - 最小栈</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/stack-and-queue/622-design-circular-queue"><span>622 - 设计循环队列</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/stack-and-queue/739-daily-temperatures"><span>739 - 每日温度</span></a></li></ul></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/binary-tree">二叉树</a><ul><li><a href="/data-structure-and-algorithms-guidebook//leetcode/binary-tree/98-validate-binary-search-tree"><span>98 - 验证二叉搜索树</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/binary-tree/1361-validate-binary-tree-tree-nodes"><span>1361 - 验证二叉树</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/binary-tree/offer-68-er-cha-shu-de-zui-jin-gong-gong-zu-xian-lcof"><span>剑指 68 - 二叉树的最近公共祖先</span></a></li></ul></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/graph">深度优先和广度优先</a><ul><li><a href="/data-structure-and-algorithms-guidebook//leetcode/graph/200-number-of-islands"><span>200 - 岛屿数量</span></a></li></ul></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/greedy-algorithms">贪心算法</a><ul><li><a href="/data-structure-and-algorithms-guidebook//leetcode/greedy-algorithms/455-assign-cookies"><span>455 - 分发饼干</span></a></li></ul></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/backtracking">回溯算法</a><ul><li><a href="/data-structure-and-algorithms-guidebook//leetcode/backtracking/17-letter-combinations-of-a-phone-number"><span>17 - 电话号码的字母组合</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/backtracking/93-restore-ip-addresses"><span>93 - 复原 IP 地址</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/backtracking/interview-8-12-eight-queens-lcci"><span>面试题 08.12 - 八皇后</span></a></li></ul></li><li><a aria-current="page" class="active" href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming">动态规划</a><ul><li><a href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/53-maximum-subarray"><span>53 - 最大子序和</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/70-climbing-stairs"><span>70 - 爬楼梯</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/121-best-time-to-buy-and-sell-stock"><span>121 - 买卖股票的最佳时机</span></a></li><li><a aria-current="page" class="active" href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/122-best-time-to-buy-and-sell-stock-ii"><span>122 - 买卖股票的最佳时机 II</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/123-best-time-to-buy-and-sell-stock-iii"><span>122 - 买卖股票的最佳时机 III</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/221-maximal-square"><span>221 - 最大正方形</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/322-coin-change"><span>322 - 零钱兑换</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/416-partition-equal-subset-sum"><span>416 - 分割等和子集</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/474-ones-and-zeros"><span>474 - 一和零</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/494-target-sum"><span>494 - 目标和</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/1143-longest-common-subsequence"><span>1143 - 最长公共子序列</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/5545-best-team-with-no-conflicts"><span>5545 - 无矛盾的最佳球队</span></a></li></ul></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/math">数学</a><ul><li><a href="/data-structure-and-algorithms-guidebook//leetcode/math/60-permutation-sequence"><span>60 - 第 K 个排列</span></a></li><li><a href="/data-structure-and-algorithms-guidebook//leetcode/math/233-number-of-digit-one"><span>233 - 数字 1 的个数</span></a></li></ul></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="解题思路" data-depth="2"><a href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/122-best-time-to-buy-and-sell-stock-ii#解题思路"><span>解题思路</span></a></li><li title="暴力搜索" data-depth="3"><a href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/122-best-time-to-buy-and-sell-stock-ii#暴力搜索"><span>暴力搜索</span></a></li><li title="贪心算法" data-depth="3"><a href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/122-best-time-to-buy-and-sell-stock-ii#贪心算法"><span>贪心算法</span></a></li><li title="动态规划" data-depth="3"><a href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/122-best-time-to-buy-and-sell-stock-ii#动态规划"><span>动态规划</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="买卖股票的最佳时机-ii"><a aria-hidden="true" tabindex="-1" href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/122-best-time-to-buy-and-sell-stock-ii#买卖股票的最佳时机-ii"><span class="icon icon-link"></span></a>买卖股票的最佳时机 II</h1><p><code>动态规划</code></p><p>给定一个数组，它的第 <span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="0.781ex" height="1.52ex" role="img" focusable="false" viewBox="0 -661 345 672" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"></use></g></g></g></svg></mjx-container></span> 个元素是一支给定股票第 <span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="0.781ex" height="1.52ex" role="img" focusable="false" viewBox="0 -661 345 672" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-2-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D456" xlink:href="#MJX-2-TEX-I-1D456"></use></g></g></g></svg></mjx-container></span> 天的价格。</p><p>设计一个算法来计算你所能获取的最大利润。你可以尽可能地完成更多的交易（多次买卖一支股票）。</p><p>注意：你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。</p><p><strong>示例 1:</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-plain"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">输入: [7,1,5,3,6,4]</span></div><div class="token-line"><span class="token plain">输出: 7</span></div><div class="token-line"><span class="token plain">解释: 在第 2 天（股票价格 = 1）的时候买入，在第 3 天（股票价格 = 5）的时候卖出, 这笔交易所能获得利润 = 5-1 = 4 。</span></div><div class="token-line"><span class="token plain">     随后，在第 4 天（股票价格 = 3）的时候买入，在第 5 天（股票价格 = 6）的时候卖出, 这笔交易所能获得利润 = 6-3 = 3 。</span></div></pre></div><p><strong>示例 2:</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-plain"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">输入: [1,2,3,4,5]</span></div><div class="token-line"><span class="token plain">输出: 4</span></div><div class="token-line"><span class="token plain">解释: 在第 1 天（股票价格 = 1）的时候买入，在第 5 天 （股票价格 = 5）的时候卖出, 这笔交易所能获得利润 = 5-1 = 4 。</span></div><div class="token-line"><span class="token plain">  注意你不能在第 1 天和第 2 天接连购买股票，之后再将它们卖出。</span></div><div class="token-line"><span class="token plain">  因为这样属于同时参与了多笔交易，你必须在再次购买前出售掉之前的股票。</span></div></pre></div><p><strong>示例  3:</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-plain"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">输入: [7,6,4,3,1]</span></div><div class="token-line"><span class="token plain">输出: 0</span></div><div class="token-line"><span class="token plain">解释: 在这种情况下, 没有交易完成, 所以最大利润为 0。</span></div></pre></div><p><strong>提示：</strong></p><ul><li><code>1 &lt;= prices.length &lt;= 3 \* 10 ^ 4</code></li><li><code>0 &lt;= prices[i] &lt;= 10 ^ 4</code></li></ul><h2 id="解题思路"><a aria-hidden="true" tabindex="-1" href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/122-best-time-to-buy-and-sell-stock-ii#解题思路"><span class="icon icon-link"></span></a>解题思路</h2><p>我们必须确定通过交易能够获得的最大利润（对于交易次数没有限制）。为此，我们需要找出那些共同使得利润最大化的买入及卖出价格。</p><h3 id="暴力搜索"><a aria-hidden="true" tabindex="-1" href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/122-best-time-to-buy-and-sell-stock-ii#暴力搜索"><span class="icon icon-link"></span></a>暴力搜索</h3><h3 id="贪心算法"><a aria-hidden="true" tabindex="-1" href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/122-best-time-to-buy-and-sell-stock-ii#贪心算法"><span class="icon icon-link"></span></a>贪心算法</h3><p>贪心算法在每步总是做出在当前看来最好的选择。</p><ul><li>贪心算法、动态规划和鹅回溯算法一样，完成一件事情，是分步决策的</li><li>贪心算法在每一步总是做出在当前看来最好的选择，<strong>最好</strong> 这两字的理解<ol><li><strong>最好</strong> 的意思往往根据题目而来，可能是 <strong>最小</strong>，也可能是 <strong>最大</strong></li><li>贪心算法和动态规划相比，它既不看前面（也就是说它不需要从前面的状态转移过来），也不看后面（无后效性，后面的选择不会对前面的选择有影响），因此贪心算法时间复杂度一般是线性的，空间复杂度是常数级别的</li><li>这道题 <strong>贪心</strong> 的地方在于，对于 <code>今天的股价 - 昨天的股价</code>，得到的结果有 3 种可能：正数、0 和负数</li></ol></li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function">maxProfit</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prices</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> profit </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">let</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> pricies</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">prices</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> prices</span><span class="token punctuation">[</span><span class="token plain">i </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      profit </span><span class="token operator">+=</span><span class="token plain"> prices</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain"> prices</span><span class="token punctuation">[</span><span class="token plain">i </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> profit</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>复杂度分析：</p><ul><li>时间复杂度 <span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:-0.566ex" xmlns="http://www.w3.org/2000/svg" width="5.495ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2429 1000" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-3-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-3-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-3-TEX-I-1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path><path id="MJX-3-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-3-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-3-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(1152,0)"><use data-c="1D441" xlink:href="#MJX-3-TEX-I-1D441"></use></g><g data-mml-node="mo" transform="translate(2040,0)"><use data-c="29" xlink:href="#MJX-3-TEX-N-29"></use></g></g></g></svg></mjx-container></span>：只需遍历一次 <code>prices</code></li><li>空间复杂度 <span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:-0.566ex" xmlns="http://www.w3.org/2000/svg" width="4.618ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2041 1000" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-4-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-4-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-4-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-4-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-4-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-4-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(1152,0)"><use data-c="31" xlink:href="#MJX-4-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(1652,0)"><use data-c="29" xlink:href="#MJX-4-TEX-N-29"></use></g></g></g></svg></mjx-container></span>：变量使用常数额外空间</li></ul><h3 id="动态规划"><a aria-hidden="true" tabindex="-1" href="/data-structure-and-algorithms-guidebook//leetcode/dynamic-programming/122-best-time-to-buy-and-sell-stock-ii#动态规划"><span class="icon icon-link"></span></a>动态规划</h3><p>用到贪心算法解决的问题，一般情况下都可以用动态规划。因此，不妨从 <strong>状态</strong>、<strong>状态转移方程</strong> 的角度考虑。</p><p><strong>第一步：定义状态</strong></p><p>状态 <code>dp[i][j]</code> 定义如下：</p><ul><li><span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="0.781ex" height="1.52ex" role="img" focusable="false" viewBox="0 -661 345 672" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-5-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D456" xlink:href="#MJX-5-TEX-I-1D456"></use></g></g></g></svg></mjx-container></span>：表示前 <span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="0.781ex" height="1.52ex" role="img" focusable="false" viewBox="0 -661 345 672" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-6-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D456" xlink:href="#MJX-6-TEX-I-1D456"></use></g></g></g></svg></mjx-container></span> 天能获得的最大利润</li><li><span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:-0.462ex" xmlns="http://www.w3.org/2000/svg" width="0.932ex" height="1.957ex" role="img" focusable="false" viewBox="0 -661 412 865" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-7-TEX-I-1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D457" xlink:href="#MJX-7-TEX-I-1D457"></use></g></g></g></svg></mjx-container></span>：表示第 <span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:-0.025ex" xmlns="http://www.w3.org/2000/svg" width="0.781ex" height="1.52ex" role="img" focusable="false" viewBox="0 -661 345 672" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-8-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D456" xlink:href="#MJX-8-TEX-I-1D456"></use></g></g></g></svg></mjx-container></span> 天是否持有股票的状态，<span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-9-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-9-TEX-N-30"></use></g></g></g></svg></mjx-container></span> 表示没有持有股票，<span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 500 666" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-10-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-10-TEX-N-31"></use></g></g></g></svg></mjx-container></span> 表示持有股票</li></ul><p><strong>第二步：状态转移方程</strong></p><ul><li>状态从没有持有股票开始，到最后一天我们关心的状态依然是没有持有股票 <span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:-0.566ex" xmlns="http://www.w3.org/2000/svg" width="6.742ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2980 1000" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-11-TEX-I-1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path><path id="MJX-11-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-11-TEX-N-5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path><path id="MJX-11-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-11-TEX-N-5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path><path id="MJX-11-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D451" xlink:href="#MJX-11-TEX-I-1D451"></use></g><g data-mml-node="mi" transform="translate(520,0)"><use data-c="1D45D" xlink:href="#MJX-11-TEX-I-1D45D"></use></g><g data-mml-node="mo" transform="translate(1023,0)"><use data-c="5B" xlink:href="#MJX-11-TEX-N-5B"></use></g><g data-mml-node="mi" transform="translate(1301,0)"><use data-c="1D456" xlink:href="#MJX-11-TEX-I-1D456"></use></g><g data-mml-node="mo" transform="translate(1646,0)"><use data-c="5D" xlink:href="#MJX-11-TEX-N-5D"></use></g><g data-mml-node="mo" transform="translate(1924,0)"><use data-c="5B" xlink:href="#MJX-11-TEX-N-5B"></use></g><g data-mml-node="mn" transform="translate(2202,0)"><use data-c="30" xlink:href="#MJX-11-TEX-N-30"></use></g><g data-mml-node="mo" transform="translate(2702,0)"><use data-c="5D" xlink:href="#MJX-11-TEX-N-5D"></use></g></g></g></svg></mjx-container></span></li><li>每天状态可以发生转移，也可以不做任何操作</li></ul><p>说明：</p><ul><li>因为不限制交易次数，除了最后一天，每天的状态可能不变化，也可能转移</li><li>写代码的时候，可以不用对最后一天单独处理，输出最后一天，状态为 <span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:-0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-12-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="30" xlink:href="#MJX-12-TEX-N-30"></use></g></g></g></svg></mjx-container></span> 的时候的值即可</li></ul><p><strong>第三步：确定起始</strong></p><p>起始的时候：</p><ul><li>如果什么都不做：<code>dp[0][0] = 0</code></li><li>如果买入股票，当前收益为负数，即 <code>dp[0][1] = -prices[i]</code></li></ul><p><strong>第四步：确定终止</strong></p><p>终止的时候，上面也分析了，输出 <code>dp[len - 1][0]</code>，因为一定有 <code>dp[len - 1][0] &gt; dp[len - 1][1]</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function">maxProfit</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prices</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> len </span><span class="token operator">=</span><span class="token plain"> prices</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">len </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> dp </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain">prices</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">let</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> len</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">dp</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token plain"> dp</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    dp</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">max</span><span class="token punctuation">(</span><span class="token plain">dp</span><span class="token punctuation">[</span><span class="token plain">i </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> dp</span><span class="token punctuation">[</span><span class="token plain">i </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> prices</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    dp</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">max</span><span class="token punctuation">(</span><span class="token plain">dp</span><span class="token punctuation">[</span><span class="token plain">i </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> dp</span><span class="token punctuation">[</span><span class="token plain">i </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain"> prices</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> dp</span><span class="token punctuation">[</span><span class="token plain">len </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>复杂度分析：</p><ul><li>时间复杂度 <span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:-0.566ex" xmlns="http://www.w3.org/2000/svg" width="5.495ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2429 1000" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-13-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-13-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-13-TEX-I-1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path><path id="MJX-13-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-13-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-13-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(1152,0)"><use data-c="1D441" xlink:href="#MJX-13-TEX-I-1D441"></use></g><g data-mml-node="mo" transform="translate(2040,0)"><use data-c="29" xlink:href="#MJX-13-TEX-N-29"></use></g></g></g></svg></mjx-container></span>，这里 <span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:0" xmlns="http://www.w3.org/2000/svg" width="2.009ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 888 683" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-14-TEX-I-1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D441" xlink:href="#MJX-14-TEX-I-1D441"></use></g></g></g></svg></mjx-container></span> 表示股价数组的长度</li><li>空间复杂度 <span class="math math-inline"><mjx-container className="MathJax" jax="SVG"><svg style="vertical-align:-0.566ex" xmlns="http://www.w3.org/2000/svg" width="5.495ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2429 1000" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-15-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-15-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-15-TEX-I-1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path><path id="MJX-15-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-15-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-15-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(1152,0)"><use data-c="1D441" xlink:href="#MJX-15-TEX-I-1D441"></use></g><g data-mml-node="mo" transform="translate(2040,0)"><use data-c="29" xlink:href="#MJX-15-TEX-N-29"></use></g></g></g></svg></mjx-container></span>，虽然是二维数组，但是第二维是常数，与问题规模无关</li></ul><p>我们也可以将状态数组分开设置，语义更明确。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function">maxProfit</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prices</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> len </span><span class="token operator">=</span><span class="token plain"> prices</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">len </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> cash </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token punctuation">(</span><span class="token plain">len</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    stock </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token punctuation">(</span><span class="token plain">len</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  cash</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  stock</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain">prices</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">let</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> len</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    cash</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">max</span><span class="token punctuation">(</span><span class="token plain">cash</span><span class="token punctuation">[</span><span class="token plain">i </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> stock</span><span class="token punctuation">[</span><span class="token plain">i </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> prices</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    stock</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">max</span><span class="token punctuation">(</span><span class="token plain">stock</span><span class="token punctuation">[</span><span class="token plain">i </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> cash</span><span class="token punctuation">[</span><span class="token plain">i </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain"> prices</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> cash</span><span class="token punctuation">[</span><span class="token plain">len </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>优化空间：由于当前行只参考上一行，每行就两个值，因此可以考虑使用 <strong>滚动变量</strong>（滚动数组的技巧）。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function">maxProfit</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> len </span><span class="token operator">=</span><span class="token plain"> prices</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">len </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><hr/><p><strong>参考资料：</strong></p><ul><li><a target="_blank" rel="noopener noreferrer" href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/solution/tan-xin-suan-fa-by-liweiwei1419-2/">暴力搜索、贪心算法、动态规划<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><style>
mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
  min-height: 1px;
  min-width: 1px;
}

mjx-container[jax="SVG"] > svg a {
  fill: blue;
  stroke: blue;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][display="true"][width="full"] {
  display: flex;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line], svg[data-table] > g > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame], svg[data-table] > g > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed, svg[data-table] > g > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted, svg[data-table] > g > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > g > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] {
  stroke-width: 3;
}
</style></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/leetcode/edit/master/docs/leetcode/dynamic-programming/122-best-time-to-buy-and-sell-stock-ii.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last update: ">7/29/2021 10:34:32</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/data-structure-and-algorithms-guidebook/umi.cf273d3b.js"></script>
  </body>
</html>
